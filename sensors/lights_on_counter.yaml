################################################################################
### Lights on: return number of all active lights in BaumHaus                ###
### Observed instances: all Hue bulbs (excl. light groups by "entity_id"     ###
### https://community.home-assistant.io/t/counts-the-lights-on/105361/37     ###
################################################################################

   - platform: template
     sensors:
       lights_on_counter:
         friendly_name: 'Lights on - Counter'
         value_template: >-
          {{ states.light | selectattr('state', 'eq', 'on') |
            rejectattr('attributes.entity_id') | list | count }}
